<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <label for="txt">Give Text</label>
    <input type="text"  id="txt">
    <button type="button" onclick="SearchTxt()">search text</button>
    <br>
    <br>
    <label for="dt">Give Date</label>
    <br>
    <input type="date"  id="dt">
    <button type="button" onclick="SearchDate()">search date</button>
    <br>
    <div id="MainFrame">

    </div>
</body>
<script>

const TextInputElement = document.getElementById("txt")
const DateInputElement = document.getElementById("dt");
const MainFrame = document.getElementById('MainFrame')

const GetDate = () => new Date(Date.parse(DateInputElement.value));

const SendHttpRequest =  QueryContent =>
{
  $.ajax(
    {
      url:'',
      type:'GET',
      contentType:'application/json',
        dataType:'json',
        data: { query : QueryContent },//, order_by : sort , rescount : rescount },
        cache:false,
        headers:{
            'accept':'application/json',
            'Access-Control-Allow-Origin':'*',
            'Access-Control-Allow-Headers':'*'
        },
        success:FetchResults,
        error:PrintErr 
    }
  );
}

const SearchTxt = () => SendHttpRequest(TextInputElement.value);
 
const SearchDate = () => SendHttpRequest(GetDate());

const RequestResource = (resource) =>
{//not implemented
  console.log(resource)
}

const FetchResults = SearchResults =>
{
   for( const Hit of SearchResults)
   {
     const Div  = document.createElement('div')
     Div.classList.add('container')
     
     const Href = document.createElement('div')
     Href.classList.add('clickable')
     Href.innerText = Hit.Fname
     Href.dataset.Fid = Hit.PrimaryKey
     Href.addEventListener('click', event => RequestResource(event))
   
     Div.appendChild(Href)
     MainFrame.appendChild(Div);
   }
}

const PrintErr = (data , y , z ,c ) => alert( data.responseJSON.errormesg );

</script>
</html>
